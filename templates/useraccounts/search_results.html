{% extends 'base.html' %} {% block content %}
<section>
  <div class="container-fluid pt-4">
    <div class="row pt-4">
      <div class="col-3"></div>
      <div class="col-6 d-flex justify-content-center">
        <form method="post">
            {% csrf_token %}
            {{ username_form }}
            <input type="submit" value="Submit">
        </form>
    </div>
    </div>
  </div>
</section>
<section>
  <div class="container-fluid pt-4">
    <div class="row pt-4">
      <div class="col-3"></div>
      <div class="col-6">
  {% if results %}
    {% for result in results %}
      <div class="row p-2 bg-light rounded mb-3">
        <div class="col-12 d-flex justify-content-between">
        <span>{{ result.user.username }}</span>
        {% if result not in request.user.user_account.follows.all %}
          <a href="{% url 'useraccounts:follow' useraccount_id=result.id %}">Follow</a>
        {% else %}
          <a href="{% url 'useraccounts:unfollow' useraccount_id=result.id %}">Unfollow</a>
        {% endif %}
        </div>
      </div>
    {% endfor %}
  {% else %}
    <p>No results</p>
  {% endif %}
</div>
</div>
</div>
  </section>

    <script>
      $('#id_username').val('{{ search_string }}')
      if('{{ search_string }}'.length !== 0) {
        window.history.pushState("", "", '/results/{{ search_string }}/');
      }

    </script>
{% endblock content %}
